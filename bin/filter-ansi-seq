#!/bin/sh
# SH FILE: filter-ansi-seq
#
# Purpose   : Filter out ANSI escape sequences.
# Created   : Tuesday, February 17 2026.
# Author    : Pierre Rouleau <prouleau001@gmail.com>
# Time-stamp: <2026-02-18 18:14:43 EST, updated by Pierre Rouleau>
# ----------------------------------------------------------------------------
# Module Description
# ------------------
#
# Filters and reformat output
# - remove all ANSI escape sequences (used to color the output)
#   and other controls.

# ----------------------------------------------------------------------------
# Dependencies
# ------------
#
# - Uses Perl if available, sed otherwise.
# - Tries to use GNU sed: attempts to use gsed if available, otherwise uses
#   sed.

# ----------------------------------------------------------------------------
# Code
# ----
#
#
if command -v perl >  /dev/null; then
    perl -pe 's/\e\[[0-9;]*[a-zA-Z]//g'
elif command -v gsed >  /dev/null; then
    gsed -E "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[mK]//g"
elif command -v sed >  /dev/null; then
    sed -E "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[mK]//g"
else
    printf -- "***ERROR filter-ansi-seq: missing pre-requisites!\n"
    exit 1
fi

# ----------------------------------------------------------------------------
